---
import { getCollection } from 'astro:content';
import DocsLayout from '../../layouts/DocsLayout.astro';
import { loadYaml } from '../../lib/loadYaml';

export async function getStaticPaths() {
  const docsEntries = await getCollection('docs');
  return docsEntries.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }));
}

const { entry } = Astro.props;
if (!entry) return Astro.redirect('/docs/getting-started/introduction');
const { Content } = await entry.render();
const content = await loadYaml<any>('docs.yaml');
---

<DocsLayout title={`${entry.data.title} - ElexvxAI 文档`}>
  <div class="docs-breadcrumbs">
    <span>{content.docs.breadcrumbRoot}</span>
    <span class="docs-breadcrumb-separator">/</span>
    <span>{entry.data.category}</span>
    <span class="docs-breadcrumb-separator">/</span>
    <span class="active">{entry.data.title}</span>
  </div>
  <h1>{entry.data.title}</h1>
  {entry.data.description && <p class="docs-intro-p">{entry.data.description}</p>}
  <div class="markdown-content"><Content /></div>
</DocsLayout>
