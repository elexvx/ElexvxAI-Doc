---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import BlogHero from '../components/blog/BlogHero.astro';
import BlogFilters from '../components/blog/BlogFilters.astro';
import BlogGrid from '../components/blog/BlogGrid.astro';
import { loadYaml } from '../lib/loadYaml';

const blogEntries = await getCollection('blog');
const posts = blogEntries.map((entry) => ({ slug: entry.slug, ...entry.data }));
const content = await loadYaml<any>('blog.yaml');
---

<Layout title="博客 | ElexvxAI 实验室">
  <Navbar content={content.navbar} />
  <main class="section">
    <div class="container">
      <BlogHero content={content.blog} />
      <BlogFilters filters={content.blog.filters} />
      <BlogGrid posts={posts} sectionTitle={content.blog.sectionTitle} />
    </div>
  </main>
  <Footer content={content.footer} />
</Layout>
